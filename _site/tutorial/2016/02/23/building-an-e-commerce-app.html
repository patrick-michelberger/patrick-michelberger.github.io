<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Building An E-Commerce App With Node.js & The ABOUT YOU API | Information Systems Student & Software Developer | Munich - Germany</title>
    <meta name="description" content="ABOUT YOU is a new fashion online shop with more than 55.000 products and offers an outstanding developer platform to create your own E-commerce app.You writ...">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link href='http://fonts.googleapis.com/css?family=Amatic+SC:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href=" /css/main.css ">
    <link rel="canonical" href="http://patrick.michelberger.info/tutorial/2016/02/23/building-an-e-commerce-app.html">
    <link rel="alternate" type="application/rss+xml" title="Patrick Michelberger" href="http://patrick.michelberger.info /feed.xml " />
</head>


<body>
    <div class="container-fluid">
        <div class="row">
        	<div class="col-md-8 col-md-offset-2">
            
            <header class="site-header">

  <div class="wrapper">
  
    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          <a class="page-link" href="/">About Me</a>
        
        
          
              
                <a class="page-link" href="/academic/">My Academic Work</a>
              
          
        
          
              
                <a class="page-link" href="/block/">My Blog</a>
              
          
        
          
        
          
        
          
        
          
              
                <a class="page-link" href="/projects/">My Projects</a>
              
          
        
          
              
                <a class="page-link" href="/Imprint/">Imprint</a>
              
          
        
      </div>
    </nav>
  </div>

</header>

            
            <div class="post">

  <header class="post-header">
    <h1 class="post-title" style="margin-top:20px;">Building An E-Commerce App With Node.js & The ABOUT YOU API</h1>
    <!--<p class="post-meta">Feb 23, 2016</p>-->
  </header>

  <article class="post-content pm_justify pm_text_normal">
    <p>ABOUT YOU is a new fashion online shop with more than 55.000 products and offers an outstanding developer platform to create your own E-commerce app.
You write the code to build the showcase, ABOUT YOU manages the whole backend, payment &amp; fulfillment process.</p>

<p><img src="https://cdn-images-1.medium.com/max/1600/1*oqu-8sEwvDuqQpTeYco5Kw.png" width="100%" /></p>

<p>This is going to be a tutorial which consists of three parts:
Initial setup, using the ABOUT YOU SDK for Node.js and creating an UI with a shopping basket.</p>

<h2 id="part-i-initial-setup">Part I: Initial setup</h2>

<p>For the first part of this tutorial I show you the inital setup &amp; required packages to build our Node.js web app.</p>

<h3 id="packages">Packages</h3>

<p>Our application uses the Express framework which can be considered the de facto standard for Node.js development.
I assume that you’ve got the node &amp; npm executables setup already.</p>

<h3 id="installing-express">Installing Express</h3>

<p>To install Express globally use the following command</p>

<pre><code>npm install -g express
</code></pre>

<p>After that we’re going to create a new folder and use Express to setup a default Node.js project</p>

<pre><code>mkdir testapp
cd testapp
express --hbs
npm install
</code></pre>

<p>app.js is basically the skeleton of your application and is mainly responsible for bootstrapping your application.
package.json contains all requirements and should look something like this:</p>

<pre><code>{
  "name": "testapp",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "start": "node ./bin/www"
  },
  "dependencies": {
    "express": "~4.9.0",
    "body-parser": "~1.8.1",
    "cookie-parser": "~1.3.3",
    "morgan": “~1.3.0",
    "serve-favicon": "~2.1.3",
    "debug": "~2.0.0",
    "hbs": "~2.7.0"
  }
}
</code></pre>

<p>Next to Express we defined handlebars for rendering our server-side templates. In your app.js we can get rid of the following lines.</p>

<pre><code>var users = require(‘./routes/users’);
app.use('/users', users);
</code></pre>

<p>Also delete /routes/users.js as we are not going to need it for the project.
In this tutorial most of the implementation is going to happen in routes/index.js. This is the place where we define the functions to be executed when our application receives HTTP requests.
You can run the project by executing</p>

<pre><code>npm start
</code></pre>

<p>in your project’s root folder and navigate to http://localhost:3000. Please note, npm start is an alias for node ./bin/www defined in the package.json file.</p>

<p><img src="https://cdn-images-1.medium.com/max/2000/1*5Nr4CbBUkZQXfCOf9hItBA.png" width="100%" /></p>

<p>Congratulations, we have finished all the required setup and we can now concentrate on the ABOUT YOU SDK integration.</p>

<h2 id="part-ii-about-you-sdk">Part II: ABOUT YOU SDK</h2>

<p>We’re going to setup the two needed API calls to fetch you app’s categories and to execute an arbitrary product search in the following section.</p>

<h3 id="packages-1">Packages</h3>

<p>To get going we install the SDK via npm</p>

<pre><code>npm install aboutyou-sdk --save
</code></pre>

<p>Using the option —save automatically adds the module to the dependency section of our package.json file</p>

<pre><code>“aboutyou-sdk”: “^0.1.0"
</code></pre>

<p>Your version is probably newer than 0.1.0 — it’s just the current one available right now.</p>

<h3 id="credentials">Credentials</h3>

<p>The use of the ABOUT YOU API requires credentials that you obtain on developer.aboutyou.de
To do so, create a new application and take a look on the overview page. There you can find your App-ID and credentials (token &amp; secret).</p>

<p><img src="https://d262ilb51hltx0.cloudfront.net/max/2000/1*PzhFtSAXlNo68a-bGfSZgQ.png" width="100%" /></p>

<p>For the sake of convenience we’re going to use the test credentials that allow us to access a sample’s app category &amp; product catalogue.</p>

<h3 id="setting-up-the-configuration">Setting up the configuration</h3>

<p>We need to add the ABOUT YOU SDK to our app.js file and initialize it with our sample App-ID and token. For the sake of convenience, we intercept each http request and bind the ay object to the req parameter.</p>

<pre><code>var aboutYou =
require('aboutyou-sdk')(100,'3ed93394c2b5ebd12c104b177b928ad0');
// Make the AboutYou module accessible to our router
app.use(function(req,res,next){
  req.aboutYou = aboutYou;
  next();
});
</code></pre>

<p>Having made these changes the SDK is now accessible to all of our app’s routes and we’re finally ready to start our categories &amp; products integration.</p>

<h3 id="fetching-your-apps-category-tree">Fetching your app’s category tree</h3>
<p>A category is a simple JSON object that looks like this</p>

<pre><code>{
  "id": 74415,
  "name": "Frauen",
  "active": true,
  "subcategories": [{
    "id": 74417,
    "name": 'Shirts',
    "active": true,
    "subcategories": []
  }]
}
</code></pre>

<p>Categories are basically a defined product filter. You use them to decide which of the more than 50.000 ABOUT YOU products should be offered in your app. Lastly, they are also used as a navigation tool through your app.
You can create &amp; configure them in the Developer Center:</p>

<p><img src="https://d262ilb51hltx0.cloudfront.net/max/2000/1*eGXosh7rf5PP1Yrh4AiL-w.png" width="100%" /></p>

<p>Once you finished your categories settings you can query them through our SDK method fetchCategoryTree().
To make your category tree accessible via an API call we’ll extend index.js with a /api/categories route:</p>

<pre><code>var express = require('express');
var router = express.Router();
var ay =
require('aboutyou-sdk')(100,'3ed93394c2b5ebd12c104b177b928ad0');
/* GET home page. */
router.get('/', function(req, res) {
 res.render('index', { title: 'Express' });
});
/* API */
router.get('/api/categories', function(req, res) {
 req.aboutYou.fetchCategoryTree(function(error, categoryTree) {
   var categories = categoryTree.toJSON();
   res.json(categories);
 });
});
module.exports = router;
</code></pre>

<p>When running your app now using npm start, you should be able to navigate over to http://localhost:3000/api/categories and should return your app’s category tree.</p>

<h3 id="executing-a-product-search">Executing a product search</h3>

<p>This was quite straightforward and you’ve got now all data to build a basic category navigation. Anyway, the real fun starts when we are able to display the actual products.</p>

<p>A product is a simple JSON object that can look like this:</p>

<pre><code>{
  “id”: 1580329,
  “name”: “T-Shirt aus Jersey”,
  “brand”: {
    “id”: 414,
    “name”: “EDC BY ESPRIT”
  },
  “defaultImage”: {
    “url”:     “http://cdn.aboutyou.de/file/ed4745ab6847f37ec11acbf9a6002e5b"
  }
}
</code></pre>

<p>To get this data, we need again a new route in our application and we’re going to leverage the SDK method fetchProductSearch(criteria, callback).</p>

<pre><code>router.get('/api/categories/:id/products', function(req, res) {
  var criteria = req.aboutYou.productSearchCriteria;

  // search criteria settings
  criteria.filterByCategoryIds(req.params.id);
  criteria.selectProductFields(['brand_id', 'default_image']);
  // execute product search
  req.aboutYou.fetchProductSearch(criteria, function(err, searchResult) {
    if(!err) {
      var products = searchResult.toJSON();
      res.json(products);
    }
  });
});
</code></pre>

<p>There are various setting options for the search criteria: An overview of the available methods can you find in the documentation.</p>

<h2 id="part-3">Part 3</h2>
<p>Congratulations, our application delivers category &amp; product data successfully but doesn’t use any UI yet. In the last part (released very soon) of this tutorial I’m going to focus on the front-end and the interaction with our existing code.</p>

  </article>

</div> 
            </div>
        </div>
    </div>
</body>

</html>
